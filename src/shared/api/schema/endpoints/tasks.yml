schemas:
  Task:
    type: object
    oneOf:
      - $ref: "#/schemas/TaskListenAndWriteAll"
      - $ref: "#/schemas/TaskTranslateAll"
      - $ref: "#/schemas/TaskWritePart"
      - $ref: "#/schemas/TaskListenAndPlaceInOrder"
      - $ref: "#/schemas/TaskSelectWordByImage"
      - $ref: "#/schemas/TaskMatchWords"
    discriminator:
      propertyName: type
      mapping:
        listen-and-write-all: "#/schemas/TaskListenAndWriteAll"
        translate-all: "#/schemas/TaskTranslateAll"
        write-part: "#/schemas/TaskWritePart"
        listen-and-place-in-order: "#/schemas/TaskListenAndPlaceInOrder"
        select-word-by-image: "#/schemas/TaskSelectWordByImage"
        match-words: "#/schemas/TaskMatchWords"

  TaskBase:
    type: object
    required:
      - number
      - type
      - result
    properties:
      number:
        type: integer
        description: Number of task
      type:
        type: string
        enum:
          - listen-and-write-all
          - translate-all
          - write-part
          - listen-and-place-in-order
          - select-word-by-image
          - match-words
        description: Type of task
      result:
        oneOf:
          - type: array
            items:
              type: string
          - type: string

  TaskListenAndWriteAll:
    allOf:
      - $ref: "#/schemas/TaskBase"
      - type: object
        required:
          - text
          - type
          - translation
          - result
        properties:
          type:
            type: string
            enum: [listen-and-write-all]
          text:
            type: array
            items:
              $ref: "./words.yml#/schemas/Word"
          translation:
            type: string
          result:
            type: array
            items:
              type: string

  TaskTranslateAll:
    allOf:
      - $ref: "#/schemas/TaskBase"
      - type: object
        required:
          - text
          - type
          - translation
          - result
        properties:
          type:
            type: string
            enum: [translate-all]
          text:
            type: array
            items:
              $ref: "./words.yml#/schemas/Word"
          translation:
            type: string
          result:
            type: array
            items:
              type: string

  TaskWritePart:
    allOf:
      - $ref: "#/schemas/TaskBase"
      - type: object
        required:
          - text
          - translation
          - type
          - result
        properties:
          type:
            type: string
            enum: [write-part]
          text:
            type: array
            items:
              oneOf:
                - $ref: "./words.yml#/schemas/Word"
                - $ref: "./words.yml#/schemas/WordInput"
          translation:
            type: string
          result:
            type: array
            items:
              type: string

  TaskListenAndPlaceInOrder:
    allOf:
      - $ref: "#/schemas/TaskBase"
      - type: object
        required:
          - text
          - type
          - translation
          - result
        properties:
          type:
            type: string
            enum: [listen-and-place-in-order]
          text:
            type: array
            items:
              $ref: "./words.yml#/schemas/Word"
          translation:
            type: string
          result:
            type: array
            items:
              type: string

  TaskSelectWordByImage:
    allOf:
      - $ref: "#/schemas/TaskBase"
      - type: object
        required:
          - words
          - type
          - result
          - wordToGuess
        properties:
          type:
            type: string
            enum: [select-word-by-image]
          words:
            type: array
            items:
              $ref: "./words.yml#/schemas/WordImg"
          result:
            type: string
          wordToGuess:
            $ref: "./words.yml#/schemas/Word"

  TaskMatchWords:
    allOf:
      - $ref: "#/schemas/TaskBase"
      - type: object
        required:
          - words
          - type
          - result
        properties:
          type:
            type: string
            enum: [match-words]
          words:
            type: array
            items:
              $ref: "./words.yml#/schemas/Word"
          result:
            type: string

  TaskType:
    type: string
    enum:
      - listen-and-write-all
      - translate-all
      - write-part
      - listen-and-place-in-order
      - select-word-by-image
      - match-words

  TaskList:
    type: array
    items:
      $ref: "#/schemas/Task"

getTasksByVariantNumberInLesson:
  description: Retrieve a list of tasks
  parameters:
    - name: sectionNumber
      in: path
      required: true
      schema:
        type: string
      description: Section Number
    - name: unitNumber
      in: path
      required: true
      schema:
        type: string
      description: Unit Number
    - name: lessonNumber
      in: path
      required: true
      schema:
        type: string
      description: Lesson Number
    - name: variantNumber
      in: path
      required: true
      schema:
        type: string
        description: Variant Number
  responses:
    "200":
      description: A list of tasks
      content:
        application/json:
          schema:
            $ref: "#/schemas/TaskList"
    "404":
      $ref: "../shared/responses.yml#/NotFoundError"
